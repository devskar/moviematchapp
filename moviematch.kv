#:include objects/components.kv

WindowManager:
    RegisterWindow:
    CreateOrJoinWindow:
    JoinWindow:
    RoomWindow:


<RegisterWindow>
    name:"register"

    BoxLayout
        orientation: 'vertical'
        padding: 50
        spacing: 50

        Image:
            source: 'resources/nike.png'
            size: self.texture_size

        BoxLayout:
            spacing: 10
            orientation: 'vertical'

            DefaultTextInput:
                id: name
                hint_text:"enter your name"

            DefaultButton:
                text: 'continue'
                on_press:
                    app.root.current = "createorjoin" if root.register(name.text) else "register"

<CreateOrJoinWindow>
    name:"createorjoin"

    BoxLayout:
        orientation: 'vertical'
        DefaultButton:
            text: "create"
            on_release:
                root.create_room()
                app.root.current = "room"
                root.manager.transition.direction = "left"

        DefaultButton:
            text: "join"
            on_release:
                app.root.current = "join"
                root.manager.transition.direction = "right"

<JoinWindow>:
    name:"join"

    BoxLayout
        orientation: 'vertical'
        padding: [10,50,10,50]
        spacing: 50

        Label:
            text: 'MOVIEMATCHAPP'
            font_size: 32

        BoxLayout:
            orientation: 'vertical'
            Label:
                text: 'room ID:'
                halign: 'left'
                font_size: 18
                text_size: root.width-20, 20

            DefaultTextInput:
                id: room_id
                input_filter: "int"
                hint_text:"enter the room id"
                multiline:False
                font_size: 28

        DefaultButton:
            text: 'join'
            font_size: 24

            on_press:
                root.join_room(int(room_id.text))
                app.root.current = "room"
                root.manager.transition.direction = "left"

<RoomWindow>:
    name: "room"

    DefaultButton:
        text: "print group member"
        on_press:
            root.button_click()

#    DefaultButton:
#        text: "Go Back"
#        on_release:
#            app.root.current = "register"
#            root.manager.transition.direction = "right"